!function(a){"undefined"!=typeof module&&"object"==typeof exports?"undefined"!=typeof window?module.exports=a():module.exports=a:window.Popover=a()}(function(){var a=function(a,b){b=b||{},this.isIE=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&parseFloat(RegExp.$1),this.link="object"==typeof a?a:document.querySelector(a),this.title=this.link.getAttribute("data-title")||null,this.content=this.link.getAttribute("data-content")||null,this.popover=null,this.options={},this.options.template=b.template?b.template:null,this.options.trigger=b.trigger?b.trigger:"hover",this.options.animation=b.animation&&"true"!==b.animation?b.animation:"true",this.options.placement=b.placement?b.placement:"top",this.options.delay=parseInt(b.delay)||100,this.options.dismiss=!(!b.dismiss||"true"!==b.dismiss),this.duration=150,this.options.duration=this.isIE&&this.isIE<10?0:b.duration||this.duration,this.options.container=document.body,(this.content||this.options.template)&&this.init(),this.timer=0,this.rect=null};a.prototype={init:function(){this.actions();var a="onmouseleave"in this.link?["mouseenter","mouseleave"]:["mouseover","mouseout"];"hover"===this.options.trigger?(this.link.addEventListener(a[0],this.open,!1),this.options.dismiss||this.link.addEventListener(a[1],this.close,!1)):"click"===this.options.trigger?(this.link.addEventListener("click",this.toggle,!1),this.options.dismiss||this.link.addEventListener("blur",this.close,!1)):"focus"===this.options.trigger&&(this.link.addEventListener("focus",this.toggle,!1),this.options.dismiss||this.link.addEventListener("blur",this.close,!1)),this.options.dismiss&&document.addEventListener("click",this.dismiss,!1),this.isIE&&this.isIE<9||window.addEventListener("resize",this.close,!1)},actions:function(){var a=this;this.toggle=function(b){null===a.popover?a.open():a.close()},this.open=function(b){clearTimeout(a.link.getAttribute("data-timer")),a.timer=setTimeout(function(){null===a.popover&&(a.createPopover(),a.stylePopover(),a.updatePopover())},a.options.duration),a.link.setAttribute("data-timer",a.timer)},this.dismiss=function(b){a.popover&&b.target===a.popover.querySelector(".close")&&a.close()},this.close=function(b){clearTimeout(a.link.getAttribute("data-timer")),a.timer=setTimeout(function(){a.popover&&null!==a.popover&&/\bin/.test(a.popover.className)&&(a.popover.className=a.popover.className.replace(" in",""),setTimeout(function(){a.removePopover()},a.options.duration))},a.options.delay+a.options.duration),a.link.setAttribute("data-timer",a.timer)},this.removePopover=function(){this.popover&&this.options.container.removeChild(this.popover),this.popover=null,this.timer=null},this.createPopover=function(){if(this.popover=document.createElement("div"),null!==this.content&&null===this.options.template){this.popover.setAttribute("role","tooltip");var a=document.createElement("div");if(a.setAttribute("class","arrow"),null!==this.title){var b=document.createElement("h3");b.setAttribute("class","popover-title"),this.options.dismiss?b.innerHTML=this.title+'<button type="button" class="close">×</button>':b.innerHTML=this.title,this.popover.appendChild(b)}var c=document.createElement("div");c.setAttribute("class","popover-content"),this.popover.appendChild(a),this.popover.appendChild(c),this.options.dismiss&&null===this.title?c.innerHTML=this.content+'<button type="button" class="close">×</button>':c.innerHTML=this.content}else{var d=document.createElement("div");d.innerHTML=this.options.template,this.popover.innerHTML=d.firstChild.innerHTML}this.options.container.appendChild(this.popover),this.popover.style.display="block"},this.stylePopover=function(a){this.rect=this.getRect();var b=a||this.options.placement,c="true"===this.options.animation?"fade":"";this.popover.setAttribute("class","popover "+b+" "+c);var d={w:this.rect.right-this.rect.left,h:this.rect.bottom-this.rect.top},e=this.popoverDimensions(this.popover),f={w:e.w,h:e.h},g=this.getScroll().y,h=this.getScroll().x;/top/.test(b)?(this.popover.style.top=this.rect.top+g-f.h+"px",this.popover.style.left=this.rect.left+h-f.w/2+d.w/2+"px"):/bottom/.test(b)?(this.popover.style.top=this.rect.top+g+d.h+"px",this.popover.style.left=this.rect.left+h-f.w/2+d.w/2+"px"):/left/.test(b)?(this.popover.style.top=this.rect.top+g-f.h/2+d.h/2+"px",this.popover.style.left=this.rect.left+h-f.w+"px"):/right/.test(b)&&(this.popover.style.top=this.rect.top+g-f.h/2+d.h/2+"px",this.popover.style.left=this.rect.left+h+d.w+"px")},this.updatePopover=function(){var b=null;b=a.isElementInViewport(a.popover)?a.options.placement:a.updatePlacement(),a.stylePopover(b),a.popover.className+=" in"},this.updatePlacement=function(){var a=this.options.placement;return/top/.test(a)?"bottom":/bottom/.test(a)?"top":/left/.test(a)?"right":/right/.test(a)?"left":void 0},this.getRect=function(){return this.link.getBoundingClientRect()},this.getScroll=function(){return{y:window.pageYOffset||document.documentElement.scrollTop,x:window.pageXOffset||document.documentElement.scrollLeft}},this.popoverDimensions=function(a){return{w:a.offsetWidth,h:a.offsetHeight}},this.isElementInViewport=function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)}}};var b=document.querySelectorAll("[data-toggle=popover]"),c=0,d=b.length;for(c;c<d;c++){var e=b[c],f={};f.trigger=e.getAttribute("data-trigger"),f.animation=e.getAttribute("data-animation"),f.duration=e.getAttribute("data-duration"),f.placement=e.getAttribute("data-placement"),f.dismiss=e.getAttribute("data-dismiss"),f.delay=e.getAttribute("data-delay"),new a(e,f)}return a});