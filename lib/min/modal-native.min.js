//Vanilla JS script | Modal for Bootstrap 3
//by dnp_theme

var Modal=function(t,e){this.opened=!1,this.modal="object"==typeof t?t:document.querySelector(t),this.options={},this.options.backdrop="false"===e.backdrop?!1:!0,this.options.keyboard="false"===e.keyboard?!1:!0,this.options.content=e.content,this.duration=e.duration||300,this.options.duration=document.documentElement.classList.contains("ie")?0:this.duration,this.dialog=this.modal.querySelector(".modal-dialog"),this.timer=0,this.init()};Modal.prototype.init=function(){this.options.content&&void 0!==this.options.content&&this.content(this.options.content),this.resize(),this.dismiss(),this.keydown(),this.trigger()},Modal.prototype.open=function(){this._open()},Modal.prototype.close=function(){this._close()},Modal.prototype._open=function(){var t=this;this.options.backdrop?this.createOverlay():this.overlay=null,document.body.classList.add("modal-open"),this.modal.style.display="block",clearTimeout(t.modal.getAttribute("data-timer")),this.timer=setTimeout(function(){null!==t.overlay&&(t._resize(),t.overlay.classList.add("in")),t.modal.classList.add("in"),t.modal.setAttribute("aria-hidden",!1)},t.options.duration/2),this.modal.setAttribute("data-timer",t.timer),this.opened=!0},Modal.prototype._close=function(){var t=this;this.modal.classList.remove("in"),this.modal.setAttribute("aria-hidden",!0),this.overlay&&this.overlay.classList.remove("in"),document.body.classList.remove("modal-open"),clearTimeout(t.modal.getAttribute("data-timer")),this.timer=setTimeout(function(){t.modal.style.display="none",t.removeOverlay()},t.options.duration/2),this.modal.setAttribute("data-timer",t.timer),this.opened=!1},Modal.prototype.content=function(t){return this.modal.querySelector(".modal-content").innerHTML=t},Modal.prototype.createOverlay=function(){var t=document.createElement("div"),e=document.querySelector(".modal-backdrop");t.setAttribute("class","modal-backdrop fade"),e?this.overlay=e:(this.overlay=t,document.body.appendChild(t))},Modal.prototype.removeOverlay=function(){var t=document.querySelector(".modal-backdrop");null!==t&&void 0!==t&&document.body.removeChild(t)},Modal.prototype.keydown=function(){var t=this;document.addEventListener("keydown",function(e){t.options.keyboard&&27==e.which&&t.close()},!1)},Modal.prototype.trigger=function(){var t=this,e=document.querySelectorAll('[data-toggle="modal"]');[].forEach.call(e,function(e){e.addEventListener("click",function(e){var o=e.target,i=o.getAttribute("data-target")&&o.getAttribute("data-target").replace("#","")||o.getAttribute("href")&&o.getAttribute("href").replace("#","");document.getElementById(i)===t.modal&&t.open()})})},Modal.prototype._resize=function(){var t=this,e=this.overlay||document.querySelector(".modal-backdrop"),o={w:document.documentElement.clientWidth+"px",h:document.documentElement.clientHeight+"px"};setTimeout(function(){null!==e&&e.classList.contains("in")&&(e.style.height=o.h,e.style.width=o.w)},t.options.duration/2)},Modal.prototype.resize=function(){var t=this;window.addEventListener("resize",function(){setTimeout(function(){t._resize()},50)},!1)},Modal.prototype.dismiss=function(){var t=this;this.modal.addEventListener("click",function(e){"modal"===e.target.parentNode.getAttribute("data-dismiss")||"modal"===e.target.getAttribute("data-dismiss")||e.target===t.modal?(e.preventDefault(),t.close()):(e.stopPropagation(),e.preventDefault())})};var Modals=document.querySelectorAll(".modal");[].forEach.call(Modals,function(t){var e={};return e.keyboard=t.getAttribute("data-keyboard"),e.backdrop=t.getAttribute("data-backdrop"),e.duration=t.getAttribute("data-duration"),new Modal(t,e)});