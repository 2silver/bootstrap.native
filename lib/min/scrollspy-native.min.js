// Native Javascript for Bootstrap 3 | ScrollSpy
// by dnp_theme

var ScrollSpy=function(t,e,i){this.element="object"==typeof t?t:document.querySelector(t),this.options={},this.options.target=i.target?"object"==typeof i.target?i.target:document.querySelector(i.target):null,this.items=this.options.target&&this.options.target.getElementsByTagName("A"),this.item=e,this.parent=this.item.parentNode,this.parentParent=this.parent.parentNode.parentNode,this.tg=this.item.href&&document.getElementById(this.item.getAttribute("href").replace("#","")),this.active=!1,this.topEdge=0,this.bottomEdge=0,this.scrollTarget=this.element.offsetHeight<this.element.scrollHeight?this.element:window,this.options.target&&this.init()};ScrollSpy.prototype={init:function(){this.item.getAttribute("href")&&this.item.getAttribute("href").indexOf("#")>-1&&(this.checkEdges(),this.refresh(),this.scrollEvent(),this.resizeEvent())},topLimit:function(){this.tg.currentStyle||window.getComputedStyle(this.tg),this.element.currentStyle||window.getComputedStyle(this.element);return this.scrollTarget===window?this.tg.getBoundingClientRect().top+this.scrollOffset():this.tg.offsetTop},bottomLimit:function(){this.tg.currentStyle||window.getComputedStyle(this.tg),this.element.currentStyle||window.getComputedStyle(this.element);return this.topLimit()+this.tg.offsetHeight},checkEdges:function(){this.topEdge=this.topLimit(),this.bottomEdge=this.bottomLimit()},scrollOffset:function(){return this.scrollTarget===window?window.pageYOffset||document.documentElement.scrollTop:this.element.scrollTop},activate:function(){this.parent&&"LI"===this.parent.tagName&&!this.parent.classList.contains("active")&&(this.parent.classList.add("active"),this.parentParent&&"LI"===this.parentParent.tagName&&this.parentParent.classList.contains("dropdown")&&!this.parentParent.classList.contains("active")&&this.parentParent.classList.add("active"),this.active=!0)},deactivate:function(){this.parent&&"LI"===this.parent.tagName&&this.parent.classList.contains("active")&&(this.parent.classList.remove("active"),this.parentParent&&"LI"===this.parentParent.tagName&&this.parentParent.classList.contains("dropdown")&&this.parentParent.classList.contains("active")&&this.parentParent.classList.remove("active"),this.active=!1)},toggle:function(){this.active===!1&&this.bottomEdge>this.scrollOffset()&&this.scrollOffset()>=this.topEdge?this.activate():this.active===!0&&this.bottomEdge<=this.scrollOffset()&&this.scrollOffset()<this.topEdge&&this.deactivate()},refresh:function(){this.deactivate(),this.checkEdges(),this.toggle()},scrollEvent:function(){function t(){e.refresh()}var e=this;this.scrollTarget.addEventListener("scroll",t,!1)},resizeEvent:function(){function t(){e.refresh()}var e=this;window.addEventListener("resize",t,!1)},scrollHeight:function(){return this.scrollTarget===window?Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight):this.element.scrollHeight}};var scrollSpyes=document.querySelectorAll('[data-spy="scroll"]');[].forEach.call(scrollSpyes,function(t){var e={};if(e.target=t.getAttribute("data-target")||null,null!==e.target){var i="object"===e.target?e.target:document.querySelector(e.target),s=i.querySelectorAll("a");[].forEach.call(s,function(i){return i.href&&"#"!==i.getAttribute("href")?new ScrollSpy(t,i,e):void 0})}});